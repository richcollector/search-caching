## ğŸ“š ê³¼ì œ

- ëª©í‘œ
  ê²€ìƒ‰ì°½ êµ¬í˜„ + ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„ + ìºì‹± ê¸°ëŠ¥ êµ¬í˜„

- ì°¸ê³ ìë£Œ<br/>
  [assignment-api](https://github.com/walking-sunset/assignment-api)

- êµ¬í˜„ëª©í‘œ
  ì•„ë˜ ì‚¬ì´íŠ¸ì˜ ê²€ìƒ‰ì˜ì—­ì„ í´ë¡ í•˜ê¸°<br/>
  [í•œêµ­ì„ìƒì •ë³´](https://clinicaltrialskorea.com/)

- ì„¸ë¶€ëª©í‘œ

  - ì§ˆí™˜ëª… ê²€ìƒ‰ì‹œ API í˜¸ì¶œ í†µí•´ì„œ ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„

    - ê²€ìƒ‰ì–´ê°€ ì—†ì„ ì‹œ â€œê²€ìƒ‰ì–´ ì—†ìŒâ€ í‘œì¶œ

  - API í˜¸ì¶œë³„ë¡œ ë¡œì»¬ ìºì‹± êµ¬í˜„

    - ìºì‹± ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê¸ˆì§€(React-Query ë“±)
    - ìºì‹±ì„ ì–´ë–»ê²Œ ê¸°ìˆ í–ˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš© READMEì— ê¸°ìˆ 
    - expire timeì„ êµ¬í˜„í•  ê²½ìš° ê°€ì‚°ì 

  - ì…ë ¥ë§ˆë‹¤ API í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì¤„ì´ëŠ” ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰

    - READMEì— ì „ëµì— ëŒ€í•œ ì„¤ëª… ê¸°ìˆ 

  - APIë¥¼ í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ console.info("calling api") ì¶œë ¥ì„ í†µí•´ ì½˜ì†”ì°½ì—ì„œ API í˜¸ì¶œ íšŸìˆ˜ í™•ì¸ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

  - í‚¤ë³´ë“œë§Œìœ¼ë¡œ ì¶”ì²œ ê²€ìƒ‰ì–´ë“¤ë¡œ ì´ë™ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„
    - ì‚¬ìš©ë²• READMEì— ê¸°ìˆ 

## ğŸš€ì‹¤í–‰ ë°©ë²•

```jsx
$ npm install
$ npm start
```

## ë™ì‘ ì˜ìƒ

- ê²€ìƒ‰<br/>
  <img width='600px' src='https://github.com/richcollector/search-caching/assets/104312779/5a9e7b16-59cb-41ef-8cdf-784590d9fdbe' alt='search' />

- ìºì‹±<br/>
  <img width='600px' src='https://github.com/richcollector/search-caching/assets/104312779/2a4981e4-4161-45ff-9ff3-c52456659762' alt='caching' />

## ğŸ”¥ ê³¼ì œ ìˆ˜í–‰ ë°©ì‹

- ê²€ìƒ‰
  - ë””ë°”ìš´ì‹± (Debouncing) vs ì“°ë¡œí‹€ë§ (Throttling)
  >ë””ë°”ìš´ì‹±ì€ ì—°ì†ì ì¸ ì´ë²¤íŠ¸ ì¤‘ ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ ë°œìƒ ì´í›„ ì¼ì • ì‹œê°„(ëŒ€ê¸° ì‹œê°„)ì´ ì§€ë‚˜ì•¼ ì‘ì—…ì´ ì‹¤í–‰ë˜ë„ë¡ í•˜ëŠ” ê¸°ìˆ . ì˜ˆë¥¼ ë“¤ì–´ ê²€ìƒ‰ì°½ì— ì…ë ¥ì´ ìˆì„ ë•Œ, ë””ë°”ìš´ì‹±ì„ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì…ë ¥ì„ ì™„ë£Œí•˜ê¸° ì „ê¹Œì§€ API í˜¸ì¶œì„ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆì–´ ì„ íƒì„ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
  >```jsx
  >	useEffect(() => {
		if (keyWord === '') {
			dispatch({ type: 'loadIllness', illnessList: [] });
		} else if (keyWord) {
			const timeoutId = setTimeout(() => {
				dispatch({ type: 'requestIllness' });

				CacheRepository.get(keyWord, keyWord).then(cacheData => {
					if (cacheData) {
						dispatch({ type: 'loadIllness', illnessList: cacheData });
					} else if (cacheData === false) {
						getIllness(keyWord).then(response => {
							console.info('apií˜¸ì¶œ');
							CacheRepository.set(keyWord, keyWord, response.data);
							dispatch({ type: 'loadIllness', illnessList: response.data, keyWord });
						});
					}
				});
			}, 500);
			return () => clearTimeout(timeoutId);
		}
	}, [keyWord]);
  >```

- ì¶”ì²œ ê²€ìƒ‰ì–´ ì´ë™
- useRef vs useState
> useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ì²œê²€ìƒ‰ì–´ ë°ì´í„° ë°°ì—´ì˜ index ì´ë™ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ë²•ì„ ì„ íƒ. ì´ìœ ëŠ” refì œì–´ë¥¼ í•˜ê²Œ ë  ê²½ìš° inputì°½ê³¼ ê²€ìƒ‰ì–´ ì°½ì„ ì œì–´í•˜ê²Œë˜ì–´ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì§. í‚¤ë³´ë“œ ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•´ onKeyDown í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì—¬ ArrowUp, ArrowDown, Enter ì´ë²¤íŠ¸ë³„ë¡œ ì´ë²¤íŠ¸ ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„.
> ```jsx
>	const KeyArrow = (event: React.KeyboardEvent<HTMLInputElement>) => {
		if (event.key === 'ArrowDown') {
			if (isComposing) return;
			const lastIndex = illnessList.length < 4 ? illnessList.length - 1 : 5;

			if (selectedIndex === lastIndex) {
				return setSelectedIndex(0);
			}

			if (selectedIndex < lastIndex) {
				setSelectedIndex(prev => prev + 1);
			}
		}

		if (event.key === 'ArrowUp') {
			const lastIndex = illnessList.length < 4 ? illnessList.length - 1 : 5;
			if (selectedIndex === 0) {
				return setSelectedIndex(lastIndex);
			} else {
				setSelectedIndex(prev => prev - 1);
			}
		}

		if (event.key === 'Enter') {
			setKeyWord(illnessList[selectedIndex].sickNm);
		}
	};
> ```

- ìºì‹±
- localStorage vs sessionStorage vs cacheStorage vs state
- ë¡œì»¬ìŠ¤í† ë¦¬ì§€ëŠ” ìš©ëŸ‰ì— ì œí•œì´ìˆì–´, ëŒ€ìš©ëŸ‰ ë°ì´í„°ì— ë¶€ì í•©í•˜ë‹¤ê³  ìƒê°í•˜ê³ , ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ëŠ” ë¸Œë¼ìš°ì €ê°€ ì‚¬ë¼ì§€ë©´ ê°’ì´ ì‚¬ë¼ì§€ê¸°ë•Œë¬¸ì— ì„ íƒì„ í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. state ë³€ìˆ˜ëŠ” ìƒˆë¡œê³ ì¹¨ ì‹œ ë³€ìˆ˜ì˜ ê°’ì´ ì‚¬ë¼ì ¸ ì‚¬ìš©ì„±ì´ ë–¨ì–´ì ¸ ìºì‰¬ ìŠ¤í† ë¦¬ì§€ê°€ ìš©ëŸ‰ë©´ì—ì„œë‚˜ ë‹¤ë¥¸ storageë“¤ì´ ê°€ì§€ê³  ìˆëŠ” ë‹¨ì ì„ ê·¹ë³µí•œ ë°©ë²•ìœ¼ë¡œ í¬ë¡¬ì—ì„œë„ ì¶”ì²œí•˜ëŠ” ë°©ë²•ì´ë¼ ì„ íƒì„í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. classí˜•íƒœì˜ interfaceë¡œ ë§Œë“¤ì–´ ì ‘ê·¼í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
>```jsx
>export default class CacheIllnessRepository {
	async set(cacheName: string, url: string, illnessList: any) {
		const EXPIRATION_TIME = new Date(Date.now() + ONE_MINUTE);
		const cacheStorage = await caches.open(cacheName);
		const init = {
			headers: {
				'Content-Type': 'application/json, application/json; charset=utf-8',
				'content-length': '2',
				Expires: `${EXPIRATION_TIME}`,
			},
		};
		const clonedResponse = new Response(JSON.stringify(illnessList), init);
		await cacheStorage.put(url, clonedResponse);
		return;
	}

	async get(cacheName: string, url: string) {
		try {
			const cacheStorage = await caches.open(cacheName);
			const cachedResponse = await cacheStorage.match(url);

			if (cachedResponse === undefined) {
				return false;
			}

			return await cachedResponse.json();
		} catch (error) {
			return false;
		}
	}

	async remove() {
		const cacheNames = await caches.keys();
		const currentTime = new Date(Date.now()).getTime();
		for (const cacheName of cacheNames) {
			const cacheStorage = await caches.open(cacheName);
			const cachedResponse = await cacheStorage.match(cacheName);
			const cacheExpirationTime = new Date(cachedResponse?.headers.get('Expires') ?? '').getTime();

			if (cacheExpirationTime < currentTime) {
				await cacheStorage.delete(cacheName);
				console.info(`"${cacheName}" ë§Œë£Œë˜ì–´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
			}
		}
	}
}
>```

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### Config

<img src="https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white"> <img src="https://img.shields.io/badge/eslint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white"> <img src="https://img.shields.io/badge/prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white"> <img src="https://img.shields.io/badge/husky-FF4088?style=for-the-badge&logo=hugo&logoColor=white">

### Development

<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=Javascript&logoColor=white"> <img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=TypeScript&logoColor=white"> <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=white">

### Library

<img src="https://img.shields.io/badge/scss-CC6699?style=for-the-badge&logo=sass&logoColor=white"> <img src="https://img.shields.io/badge/React Router-CA4245?style=for-the-badge&logo=React Router&logoColor=white"> <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white"/>

## âœ… ì»¨ë²¤ì…˜

- ë¸Œëœì¹˜ í˜•ì‹
  ```jsx
  main | _develop | (_feature / a) | (_feature / b) | (_feature / c);
  ```
- ì»¤ë°‹ ì»¨ë²¤ì…˜
  | feat | ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ê²½ìš° |
  | --- | --- |
  | fix | ë²„ê·¸ë¥¼ ê³ ì¹œ ê²½ìš° |
  | docs | ë¬¸ì„œë¥¼ ìˆ˜ì •í•œ ê²½ìš° |
  | style | ì½”ë“œ í¬ë§· ë³€ê²½, ì„¸ë¯¸ ì½œë¡  ëˆ„ë½, ì½”ë“œ ìˆ˜ì •ì´ ì—†ëŠ” ê²½ìš° |
  | refactor | í”„ë¡œë•ì…˜ ì½”ë“œ ë¦¬íŒ©í† ë§ |
  | chore | ê¸°íƒ€ ë³€ê²½ì‚¬í•­ |
  | test | test ê´€ë ¨í•œ ì½”ë“œì˜ ì¶”ê°€, ìˆ˜ì •í•œ ê²½ìš° |
  | design | CSS ë“± ì‚¬ìš©ì UI ë””ìì¸ ë³€ê²½ |
  | comment | í•„ìš”í•œ ì£¼ì„ ì¶”ê°€ ë° ë³€ê²½ |
  | rename | íŒŒì¼ í˜¹ì€ í´ë”ëª…ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì˜®ê¸°ëŠ” ì‘ì—…ë§Œì¸ ê²½ìš° |
  | remove | íŒŒì¼ì„ ì‚­ì œí•˜ëŠ” ì‘ì—…ë§Œ ìˆ˜í–‰í•œ ê²½ìš° |
  | !HOTFIX | ê¸‰í•˜ê²Œ ì¹˜ëª…ì ì¸ ë²„ê·¸ë¥¼ ê³ ì³ì•¼í•˜ëŠ” ê²½ìš° |
